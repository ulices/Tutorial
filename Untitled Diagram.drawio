<mxfile host="app.diagrams.net" modified="2020-09-25T23:56:52.383Z" agent="5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36" etag="vCWteX3Vwn1cr0Km-csP" version="13.7.5" type="github">
  <diagram id="Ii0FoOivsXj-IQr9ZsnR" name="Page-1">
    <mxGraphModel dx="1042" dy="617" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-1" target="VE2SZpXta_WyNjlQ6-rk-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-1" value="Invoice complete service" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-2" target="VE2SZpXta_WyNjlQ6-rk-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-2" value="Check status detector job" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-4" target="VE2SZpXta_WyNjlQ6-rk-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-4" value="Status detector service" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="320" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-6" target="VE2SZpXta_WyNjlQ6-rk-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-6" value="Detector completed subscriber" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="315" y="40" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-8" value="Generator reports service&lt;br&gt;(strategy)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="315" y="240" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-10" target="VE2SZpXta_WyNjlQ6-rk-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="290" y="460" />
              <mxPoint x="290" y="70" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-10" value="Message (detectors.completed)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-14" value="Message&lt;br&gt;{ queue: sat_life_cycle,&lt;br&gt;topic: generate.report,&lt;br&gt;data: &#39;initial&#39;&amp;nbsp; }" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="325" y="140" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-27" value="&lt;h1&gt;Rules&lt;/h1&gt;&lt;p&gt;Income: finished message.&lt;/p&gt;&lt;p&gt;&lt;span&gt;Mensaje IncomeFinished: calls AcumulatedIncome.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Message IncomeFinished &amp;amp;&amp;amp; ExpenseFinished: calls IncomeExpense&lt;br&gt;&lt;/p&gt;&lt;p&gt;Expense: finished message.&lt;/p&gt;&lt;p&gt;Expense finished message calls&amp;nbsp;&lt;span&gt;AcumulatedExpense&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Message AcumulatedIncomeFinished &amp;amp;&amp;amp; AcumulatedExpenseFinished: calls AcumulatedIncomeExpense&lt;/p&gt;&lt;p&gt;&lt;span&gt;Supplier: finished message (redis).&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Customer: finished message (redis).&lt;/p&gt;&lt;p&gt;===== Reports =====&lt;/p&gt;&lt;p&gt;Message Income, Expense, AcumulatedIncome, AcumultedExpense, IncomeExpnese, AcumlatedIncomeExpense, Supplier and Customer finished:&lt;/p&gt;&lt;p&gt;Calls all reports.&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="640" y="40" width="190" height="790" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VE2SZpXta_WyNjlQ6-rk-20" target="VE2SZpXta_WyNjlQ6-rk-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-20" value="Strategy" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="545" width="200" height="260" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-21" value="+ field: type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-20">
          <mxGeometry y="26" width="200" height="26" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-22" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-20">
          <mxGeometry y="52" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-23" value="+ strategy_process: decide&#xa;que reporte sigue de&#xa;procesarse&#xa;&#xa;+ income: Creates message&#xa;+ expenses: Creates message&#xa;+ suppliers&#xa;+ customers&#xa;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-20">
          <mxGeometry y="60" width="200" height="200" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-28" value="ReportGenerator" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="330" y="520" width="205" height="310" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-29" value="+ field: type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-28">
          <mxGeometry y="26" width="205" height="26" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-30" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-28">
          <mxGeometry y="52" width="205" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VE2SZpXta_WyNjlQ6-rk-31" value="+ process: Generate report&#xa;{ &#xa;  name: report to generate,&#xa;  rfc: RFC,&#xa;  client_id: report_id,&#xa;  full_report: true/false&#xa;}&#xa;&#xa;&#xa;+ reports::income&#xa;+ reports::expense&#xa;....." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="VE2SZpXta_WyNjlQ6-rk-28">
          <mxGeometry y="60" width="205" height="250" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
